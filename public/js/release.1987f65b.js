(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["release"],{"0589":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"b-release"},[a("my-share",{attrs:{share:"发布"}}),a("div",{staticClass:"b-release-body"},[a("div",{staticClass:"b-item"},[a("label",{staticClass:"b-label",attrs:{for:"b-title"}},[t._v("标题：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"title",id:"b-title"},domProps:{value:t.title},on:{change:t.TitleText,input:function(e){e.target.composing||(t.title=e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.titleErr,expression:"titleErr"}],staticClass:"status"},[t._v("标题不能为空")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.titleCharErr,expression:"titleCharErr"}],staticClass:"status"},[t._v("标题不能超过50个字符")])]),a("div",{staticClass:"b-item"},[a("label",{staticClass:"b-label",attrs:{for:"b-author"}},[t._v("名字：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],attrs:{type:"text",name:"author",id:"b-author"},domProps:{value:t.author},on:{change:t.AuthorText,input:function(e){e.target.composing||(t.author=e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.authorErr,expression:"authorErr"}],staticClass:"status"},[t._v("名字不能为空")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.authorCharErr,expression:"authorCharErr"}],staticClass:"status"},[t._v("名字不能超过20个字符")])]),a("div",{staticClass:"b-flie"},[a("span",{staticClass:"b-filename"},[t._v("文件上传：")]),a("input",{attrs:{type:"file",name:"img",accept:"image/*"},on:{change:t.upload}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.fileErr,expression:"fileErr"}],staticClass:"file-status"},[t._v("文件内容不能大于2M")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.fileTErr,expression:"fileTErr"}],staticClass:"file-status"},[t._v("文件不能为空")])]),a("p",{staticClass:"b-text-content"},[t._v("内容：")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{cols:"80",rows:"10",id:"b-content-area"},domProps:{value:t.content},on:{change:t.ContentText,input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.contentErr,expression:"contentErr"}],staticClass:"conte-status"},[t._v("内容不能为空")])]),a("div",{staticClass:"b-btn"},[a("button",{staticClass:"b-release-btn",on:{click:t.Release}},[t._v("发布")])])],1)},s=[],i=(a("b0c0"),a("5530")),n=a("2f62"),l=a("c5f1"),o=a("bc3a"),h=a.n(o),u=a("be63"),c={components:{MyShare:u["a"]},data:function(){return{title:"",author:"",content:"",imgStr:"",titleErr:null,titleCharErr:null,authorErr:null,authorCharErr:null,fileErr:null,fileTErr:null,contentErr:null,flag:null}},methods:{upload:function(t){var e=this,a=localStorage.getItem("token"),r=new FormData;r.append(t.target.name,t.target.files[0]),h()({method:"POST",url:"/api/upload",data:r,headers:{"Content-Type":"application/json;charset=UTF-8",authorization:a}}).then((function(t){return t.data})).then((function(a){a.code?e.fileErr=!0:(e.imgStr=a.data,t.target.value="",e.fileErr=!1)}))},ContentText:function(t){""==t.target.value?(this.flag=!1,this.contentErr=!0):(this.flag=!0,this.contentErr=!1)},TitleText:function(t){""==t.target.value?(this.flag=!1,this.titleErr=!0):t.target.value.length>50?(this.flag=!1,this.titleErr=!1,this.titleCharErr=!0):(this.flag=!0,this.titleErr=!1,this.titleCharErr=!1)},AuthorText:function(t){""==t.target.value?(this.flag=!1,this.authorErr=!0):t.target.value.length>20?(this.flag=!1,this.authorErr=!1,this.authorCharErr=!0):(this.flag=!0,this.authorErr=!1,this.authorCharErr=!1)},Release:function(){this.imgStr&&this.title&&this.author&&this.content?(this.fileTErr=!1,this.titleErr=!1,this.authorErr=!1,this.contentErr=!1,this.titleErr||this.titleCharErr||this.authorErr||this.authorCharErr||this.fileErr||this.fileTErr||this.contentErr||!this.flag||!this.title||!this.author||!this.content||(l["a"](this.title,this.content,this.imgStr,this.author,this.data.id),this.$router.push("/"),this.$router.go(0))):this.title?this.titleErr=!1:this.author?this.author=!1:this.content?this.content=!1:this.imgStr?this.fileTErr=!1:(this.fileTErr=!0,this.titleErr=!0,this.authorErr=!0,this.contentErr=!0)}},computed:Object(i["a"])({},Object(n["c"])(["data"]))},v=c,f=(a("6006"),a("2877")),m=Object(f["a"])(v,r,s,!1,null,null,null);e["default"]=m.exports},6006:function(t,e,a){"use strict";a("bacc")},b0c0:function(t,e,a){var r=a("83ab"),s=a("9bf2").f,i=Function.prototype,n=i.toString,l=/^\s*function ([^ (]*)/,o="name";r&&!(o in i)&&s(i,o,{configurable:!0,get:function(){try{return n.call(this).match(l)[1]}catch(t){return""}}})},bacc:function(t,e,a){},be63:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-share-body"},[a("div",{staticClass:"m-share-tit"},[t._v(" "+t._s(t.share)+" ")])])},s=[],i={props:["share"]},n=i,l=a("2877"),o=Object(l["a"])(n,r,s,!1,null,null,null);e["a"]=o.exports}}]);
//# sourceMappingURL=release.1987f65b.js.map